<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Day 77 Lab - Dictionaries & Sets</title>
  <link rel="stylesheet" href="../assets/lab.css" />
</head>
<body>
  <div class="lab-container">
    <h1>Day 77 Lab</h1>
    <h2>Dictionaries & Sets</h2>

    <p><strong>Objective:</strong> Learn to store key‚Äìvalue data with <code>dict</code>, avoid duplicates with <code>set</code>, and apply both to real IT tasks like log counting, unique IP tracking, and basic access checks.</p>

    <h3>üõ† Tools Needed</h3>
    <ul>
      <li>Python 3</li>
      <li>VS Code with Python extension</li>
    </ul>

    <h3>Step 1 ‚Äì Dictionary basics (key ‚Üí value)</h3>
<pre><code># Create & read
user = {"username": "jkim", "role": "student", "active": True}
print(user["username"])           # jkim

# Safe access with default
print(user.get("department", "N/A"))

# Add / update
user["role"] = "helpdesk"
user["department"] = "IT"

# Delete
removed = user.pop("active", None)  # returns value or None
print("Removed active:", removed)

# Iterate
for k, v in user.items():
    print(k, "=>", v)

# Keys / values views
print(list(user.keys()))
print(list(user.values()))
</code></pre>

    <h3>Step 2 ‚Äì Counting with dictionaries</h3>
<pre><code>events = ["INFO","ERROR","INFO","WARN","ERROR","ERROR"]
counts = {}
for level in events:
    counts[level] = counts.get(level, 0) + 1
print(counts)  # {'INFO': 2, 'ERROR': 3, 'WARN': 1}
</code></pre>

    <h3>Step 3 ‚Äì Nested dicts & list of dicts</h3>
<pre><code>inventory = [
    {"name": "router01", "site": "HQ", "tags": ["core","network"]},
    {"name": "sw01", "site": "HQ", "tags": ["access","network"]},
]
print(inventory[0]["tags"][0])  # core
</code></pre>

    <h3>Step 4 ‚Äì Set basics (unique, unordered)</h3>
<pre><code># Build sets
ips = {"10.0.0.1", "10.0.0.2", "10.0.0.1"}  # duplicates collapse
print(ips)          # {'10.0.0.2', '10.0.0.1'}

# Add / remove
ips.add("10.0.0.3")
ips.discard("10.0.0.2")   # no error if missing
print(len(ips), "unique IPs")

# Membership
print("10.0.0.3" in ips)  # True
</code></pre>

    <h3>Step 5 ‚Äì Set operations (power tools)</h3>
<pre><code>allowed_prod = {"read_logs","restart_service","open_incident"}
allowed_sec  = {"read_logs","isolate_host","open_incident"}

print("Union:", allowed_prod | allowed_sec)        # any permission either has
print("Intersect:", allowed_prod & allowed_sec)    # shared permissions
print("Only prod:", allowed_prod - allowed_sec)    # in prod, not in sec
print("Sym diff:", allowed_prod ^ allowed_sec)     # in exactly one set
</code></pre>

    <h3>Mini Lab A ‚Äì Log Snapshot: Counts & Unique IPs</h3>
    <p>Create <code>log_snapshot.py</code> that analyzes a small in-memory ‚Äúlog.‚Äù</p>
    <ol>
      <li>Start with sample data (pretend one minute of logs):
<pre><code>levels = ["INFO","ERROR","INFO","WARN","INFO","ERROR","DEBUG","INFO"]
ip_hits = ["10.0.0.1","10.0.0.2","10.0.0.1","10.0.0.3","10.0.0.2","10.0.0.4","10.0.0.1"]
</code></pre>
      </li>
      <li>Build a dict of counts for <code>levels</code> like Step 2.</li>
      <li>Build a dict of counts for <code>ip_hits</code> (per-IP hit count).</li>
      <li>Create a set from <code>ip_hits</code> to list unique IPs; print how many uniques.</li>
      <li>Print a small report showing:
        <ul>
          <li>level counts sorted by highest count</li>
          <li>top 2 IPs by hits</li>
        </ul>
      </li>
    </ol>
    <p><strong>Example output (abridged):</strong></p>
<pre><code>Levels:
  INFO = 4
  ERROR = 2
  WARN = 1
  DEBUG = 1

Unique IPs: 4  -> {'10.0.0.1','10.0.0.2','10.0.0.3','10.0.0.4'}
Top IPs:
  10.0.0.1 = 3
  10.0.0.2 = 2
</code></pre>

    <h3>Mini Lab B ‚Äì Access Control Check (Roles ‚Üí Permissions)</h3>
    <p>Create <code>access_check.py</code> that decides if a user may perform an action based on role sets.</p>
    <ol>
      <li>Define role ‚Üí permission sets:
<pre><code>ROLE_PERMS = {
  "student": {"read_lessons"},
  "helpdesk": {"read_lessons","open_incident","reset_password"},
  "soc": {"read_lessons","read_logs","isolate_host","open_incident"}
}
</code></pre>
      </li>
      <li>Prompt for <code>username</code> and a comma-separated list of roles (e.g., <code>student,helpdesk</code>).</li>
      <li>Compute the user‚Äôs <em>effective permissions</em> = union of all role sets.</li>
      <li>Prompt for a <code>requested_action</code> (e.g., <code>isolate_host</code>) and print <code>ALLOW</code> or <code>DENY</code>.</li>
      <li>Also print:
        <ul>
          <li>All effective permissions (sorted)</li>
          <li>Which roles contributed to shared permissions (intersection, optional)</li>
        </ul>
      </li>
    </ol>
    <p><strong>Example run:</strong></p>
<pre><code>User: jkim
Roles (comma-separated): student,helpdesk
Requested action: isolate_host

Effective perms: ['open_incident','read_lessons','reset_password']
Decision: DENY (missing: isolate_host)
</code></pre>

    <h3>‚úÖ Deliverables</h3>
    <ul>
      <li>Screenshot of <code>log_snapshot.py</code> code and a run showing level counts, unique IPs, and top IPs.</li>
      <li>Screenshot of <code>access_check.py</code> with at least two runs (one ALLOW, one DENY).</li>
    </ul>

    <h3>üéØ Stretch Goals (Optional)</h3>
    <ul>
      <li><strong>log_snapshot.py:</strong> Accept a comma-separated input line from the user and merge it into <code>ip_hits</code> before analyzing.</li>
      <li><strong>access_check.py:</strong> Add a <code>remove_role</code> flow, then recompute effective permissions.</li>
      <li>Show <em>missing permissions</em> as a set difference: <code>{requested} - effective</code> (wrap string in a set).</li>
      <li>Print a ‚Äúpolicy explainer‚Äù that lists the exact role that grants the requested action when ALLOW.</li>
    </ul>

    <h3>üß† Reflect</h3>
    <ol>
      <li>Where did a <code>dict</code> (key‚Üívalue) model your data naturally today?</li>
      <li>How did using a <code>set</code> simplify uniqueness checks or comparisons?</li>
      <li>What would change if the same user could have hundreds of events or roles‚Äîhow would you keep it fast and readable?</li>
    </ol>

    <hr />
    <p><strong>Lab Summary:</strong> You used dictionaries for counting and structured records, sets for uniqueness and permission math, and combined both to build practical log and access checks‚Äîcore skills for help desk, SOC, and automation scripts.</p>
  </div>
</body>
</html>
